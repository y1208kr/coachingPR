<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 기반 영업 교육 슬라이드쇼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f2f5;
        }
        .slide {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 600px;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 300px;
            max-height: 450px;
            margin-left: auto;
            margin-right: auto;
        }
        .gemini-button {
            background-color: #118AB2;
            color: white;
            font-weight: bold;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: background-color 0.3s;
        }
        .gemini-button:hover {
            background-color: #073B4C;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #118AB2;
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 text-[#073B4C]">

    <header class="bg-[#073B4C] text-white text-center py-8 px-4">
        <h1 class="text-4xl md:text-5xl font-black mb-2">AI 기반 영업 전문가 성장 프로그램</h1>
        <p class="text-lg md:text-xl text-[#FFD166]">AI와 함께 실전 역량을 강화하는 3단계 핵심 모듈</p>
    </header>

    <main class="container mx-auto p-4 md:p-8 max-w-5xl">
        <div id="slideshow-container" class="relative">
            <button id="prev-btn" class="absolute top-1/2 -left-4 md:-left-16 transform -translate-y-1/2 bg-white/70 hover:bg-white focus:outline-none shadow-md rounded-full w-12 h-12 flex items-center justify-center text-2xl font-bold text-gray-700 z-10 transition-colors">❮</button>
            <button id="next-btn" class="absolute top-1/2 -right-4 md:-right-16 transform -translate-y-1/2 bg-white/70 hover:bg-white focus:outline-none shadow-md rounded-full w-12 h-12 flex items-center justify-center text-2xl font-bold text-gray-700 z-10 transition-colors">❯</button>

            <div class="slide">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-[#118AB2]">M1: 고객 유형별 맞춤 접근법</h2>
                    <span class="font-bold text-gray-400">Page 1 / 3</span>
                </div>
                 <div class="flex-grow flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-4 text-center">AI를 활용한 고객 유형별 스크립트 생성</h3>
                    <p class="text-sm text-gray-600 mb-6 text-center max-w-2xl mx-auto">대표 고객 유형의 특성을 이해하고 AI의 도움을 받아 맞춤형 접근 스크립트를 즉시 생성해 보세요.</p>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <div id="type-data" class="flex flex-col items-center p-4 border border-gray-200 rounded-lg text-center">
                            <span class="text-4xl mb-2">📊</span>
                            <h4 class="font-bold">데이터 신봉형</h4>
                            <p class="text-sm text-gray-600 mt-1 mb-4">숫자와 데이터 기반의 명확한 근거를 제시할 때 신뢰하며, 효율성과 ROI를 가장 중요하게 생각합니다.</p>
                            <button class="gemini-button script-generator-btn mt-auto" data-type="데이터 신봉형" data-desc="숫자와 데이터 기반의 명확한 근거를 제시할 때 신뢰하며, 효율성과 ROI를 가장 중요하게 생각합니다.">✨ 맞춤 스크립트 생성</button>
                        </div>
                        <div id="type-relation" class="flex flex-col items-center p-4 border border-gray-200 rounded-lg text-center">
                            <span class="text-4xl mb-2">🤝</span>
                            <h4 class="font-bold">의리파 형님형</h4>
                            <p class="text-sm text-gray-600 mt-1 mb-4">인간적인 관계와 신뢰를 우선시합니다. 꾸준한 관심과 진정성 있는 태도가 효과적입니다.</p>
                            <button class="gemini-button script-generator-btn mt-auto" data-type="의리파 형님형" data-desc="인간적인 관계와 신뢰를 우선시합니다. 꾸준한 관심과 진정성 있는 태도가 효과적입니다.">✨ 맞춤 스크립트 생성</button>
                        </div>
                        <div id="type-careful" class="flex flex-col items-center p-4 border border-gray-200 rounded-lg text-center">
                            <span class="text-4xl mb-2">🔍</span>
                            <h4 class="font-bold">신중한 탐색가형</h4>
                            <p class="text-sm text-gray-600 mt-1 mb-4">결정까지 다양한 정보를 비교하고 검토합니다. 충분한 정보와 선택지를 제공해야 합니다.</p>
                            <button class="gemini-button script-generator-btn mt-auto" data-type="신중한 탐색가형" data-desc="결정까지 다양한 정보를 비교하고 검토합니다. 충분한 정보와 선택지를 제공해야 합니다.">✨ 맞춤 스크립트 생성</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="slide">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-[#06D6A0]">M2: 거절을 기회로 바꾸는 대처법</h2>
                    <span class="font-bold text-gray-400">Page 2 / 3</span>
                </div>
                <div class="flex-grow flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-4 text-center">✨ AI와 함께하는 거절 극복 훈련</h3>
                    <p class="text-sm text-gray-600 mb-6 text-center">고객의 실제 거절 멘트를 입력하고, AI가 제안하는 다양한 대처법을 확인해 보세요.</p>
                    <div class="max-w-xl mx-auto w-full">
                        <textarea id="objection-input" class="w-full p-2 border border-gray-300 rounded-md" rows="3" placeholder="예: '지금은 바빠요', '가격이 너무 비싸네요'"></textarea>
                        <button id="objection-handler-btn" class="gemini-button w-full mt-2">✨ 대처법 생성하기</button>
                    </div>
                </div>
            </div>

            <div class="slide">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-[#FF6B6B]">M3: AI를 활용한 고객 관리</h2>
                     <span class="font-bold text-gray-400">Page 3 / 3</span>
                </div>
                <div class="flex-grow flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-4 text-center">✨ AI 후속 메시지 초안 작성 도우미</h3>
                    <p class="text-sm text-gray-600 mb-6 text-center">미팅의 핵심 내용을 간략히 입력하면 AI가 고객에게 보낼 후속 메시지 초안을 작성해 줍니다.</p>
                    <div class="max-w-xl mx-auto w-full">
                        <textarea id="meeting-notes-input" class="w-full p-2 border border-gray-300 rounded-md" rows="4" placeholder="미팅 날짜, 논의된 고객의 문제점, 제안한 해결책, 다음 단계 등을 입력하세요."></textarea>
                        <button id="followup-generator-btn" class="gemini-button w-full mt-2">✨ 후속 메시지 초안 작성</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="gemini-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50 flex items-center justify-center">
        <div class="relative mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="modal-title" class="text-lg leading-6 font-bold text-gray-900">AI 생성 결과</h3>
                    <button id="close-modal-button" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                </div>
                <div id="modal-content" class="mt-2 px-2 py-3 max-h-96 overflow-y-auto">
                    <div id="modal-loader" class="flex justify-center items-center py-10">
                        <div class="spinner"></div>
                        <p class="ml-4">생성 중입니다. 잠시만 기다려주세요...</p>
                    </div>
                    <p id="modal-text" class="text-sm text-gray-700 text-left whitespace-pre-wrap"></p>
                </div>
                <div class="flex justify-end items-center px-4 py-3 border-t">
                    <span id="copy-success" class="text-sm text-green-600 mr-4 hidden">복사 완료!</span>
                    <button id="regenerate-button" class="gemini-button mr-2">✨ 다시 생성</button>
                    <button id="copy-button" class="bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-300 mr-2">복사하기</button>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="bg-[#073B4C] text-white text-center py-6 px-4">
        <p>&copy; 2025 Sales Growth Program. All Rights Reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // SLIDESHOW LOGIC
            const slides = document.querySelectorAll('.slide');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            let currentSlide = 0;

            function showSlide(index) {
                slides.forEach((slide, i) => {
                    if (i === index) {
                        slide.classList.remove('hidden');
                    } else {
                        slide.classList.add('hidden');
                    }
                });
            }

            function nextSlide() {
                currentSlide = (currentSlide + 1) % slides.length;
                showSlide(currentSlide);
            }

            function prevSlide() {
                currentSlide = (currentSlide - 1 + slides.length) % slides.length;
                showSlide(currentSlide);
            }

            prevBtn.addEventListener('click', prevSlide);
            nextBtn.addEventListener('click', nextSlide);
            
            showSlide(currentSlide);

            // MODAL AND GEMINI API LOGIC
            const modal = document.getElementById('gemini-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalLoader = document.getElementById('modal-loader');
            const modalText = document.getElementById('modal-text');
            const closeModalButton = document.getElementById('close-modal-button');
            const regenerateButton = document.getElementById('regenerate-button');
            const copyButton = document.getElementById('copy-button');
            const copySuccessMessage = document.getElementById('copy-success');

            let lastPrompt = '';

            const openModal = () => modal.classList.remove('hidden');
            const closeModal = () => modal.classList.add('hidden');

            closeModalButton.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });

            async function callGeminiAPI(prompt, retries = 3, delay = 1000) {
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                const payload = { contents: [{ parts: [{ text: prompt }] }] };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    return result.candidates?.[0]?.content?.parts?.[0]?.text || "결과를 생성할 수 없습니다. 다시 시도해 주세요.";
                } catch (error) {
                    if (retries > 0) {
                        await new Promise(res => setTimeout(res, delay));
                        return callGeminiAPI(prompt, retries - 1, delay * 2);
                    } else {
                        return "오류가 발생했습니다. 잠시 후 다시 시도해 주세요.";
                    }
                }
            }

            async function generateContent(prompt, title) {
                lastPrompt = prompt;
                modalTitle.textContent = title;
                modalText.textContent = '';
                modalLoader.style.display = 'flex';
                copySuccessMessage.classList.add('hidden');
                openModal();
                
                const result = await callGeminiAPI(prompt);
                
                modalLoader.style.display = 'none';
                modalText.textContent = result.trim();
            }
            
            regenerateButton.addEventListener('click', () => {
                if(lastPrompt) {
                    generateContent(lastPrompt, modalTitle.textContent);
                }
            });

            copyButton.addEventListener('click', () => {
                const textToCopy = modalText.textContent;
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    copySuccessMessage.classList.remove('hidden');
                    setTimeout(() => copySuccessMessage.classList.add('hidden'), 2000);
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
                document.body.removeChild(textArea);
            });

            document.querySelectorAll('.script-generator-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const type = button.dataset.type;
                    const desc = button.dataset.desc;
                    const prompt = `당신은 최고의 세일즈 코치입니다. '${type}' 고객에게 사용할 짧고 효과적인 첫 만남 스크립트를 한국어로 작성해 주세요. 이 고객의 특징은 다음과 같습니다: "${desc}". 스크립트는 친근하고 전문적이어야 하며, 빠르게 신뢰를 형성하는 것을 목표로 해야 합니다.`;
                    generateContent(prompt, `'${type}' 고객 맞춤 스크립트`);
                });
            });

            document.getElementById('objection-handler-btn')?.addEventListener('click', () => {
                const objectionInput = document.getElementById('objection-input');
                const objection = objectionInput.value.trim();
                if (!objection) {
                    alert('고객의 거절 멘트를 입력해 주세요.');
                    return;
                }
                const prompt = `당신은 세계적인 세일즈 멘토입니다. 고객이 방금 "${objection}"이라는 거절을 했습니다. 이 상황에 영업사원이 대응할 수 있는 3가지 독창적이고 실행 가능한 전략을 한국어로 제안해 주세요. 각 전략은 간결하게 설명되어야 하고, 전문적인 어조를 유지해야 합니다. 번호 목록 형식으로 답변해 주세요.`;
                generateContent(prompt, `"${objection}"에 대한 대처법`);
            });
            
            document.getElementById('followup-generator-btn')?.addEventListener('click', () => {
                const notesInput = document.getElementById('meeting-notes-input');
                const notes = notesInput.value.trim();
                 if (!notes) {
                    alert('미팅 핵심 내용을 입력해 주세요.');
                    return;
                }
                const prompt = `당신은 전문적인 세일즈 어시스턴트입니다. 다음 미팅 노트를 기반으로 간결하고 정중한 후속 메시지(이메일 또는 문자) 초안을 한국어로 작성해 주세요. 메시지는 고객에게 감사 인사를 전하고, 핵심 내용을 요약하며, 다음 단계를 명확하게 제시해야 합니다.\n\n미팅 노트:\n"${notes}"`;
                generateContent(prompt, "후속 메시지 초안");
            });

        });
    </script>
</body>
</html>

